<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title></title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.3/vue.min.js">
    </script>
    <script src="../js/jquery.js">
    </script>
    <style>
        * {
            list-style: none;
            font-family: "微軟正黑體";
            outline: none;
            box-shadow: none;
        }

        ul,
        .block {
            display: inline-block;
        }

        .colorBtn {
            /*margin-left: 50px;*/
            width: 100px;
            /*margin: auto;*/
            background-color: #fa0;
            padding: 10px;
            color: #fff;
            /*border:none;*/
            cursor: pointer;
        }

        .block {
            background-color: skyblue;
            padding: 10px;
            border-radius: 5px;
            color: #fff;
        }

        li[class^=bits--] {
            display: inline-block;
            border: 1px solid skyblue;
            width: 40px;
            height: 40px;
            margin: 7px;
            line-height: 40px;
            text-align: center;
            border-radius: 50%;
            cursor: pointer;
            transition: 0.5s;
        }

        li[class^=control--] {
            display: inline-block;
            border: 1px solid skyblue;
            width: 30px;
            height: 30px;
            margin: 4px;
            line-height: 30px;
            text-align: center;
            /*border-radius: 50%;*/
            cursor: pointer;
            transition: 0.5s;
        }

        li:hover {
            background-color: skyblue;
        }

        .current {
            background-color: skyblue;
        }

        #show {
            background-color: #eee;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <!--<div id="app">
        <ul>
            <li class="" v-on:click="handleClick" v-for="(num,index) in number">{{num}}</li>-->
    <!--<li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
            <li>7</li>
            <li>8</li>
            <li>9</li>-->
    <!--</ul>
        <button v-on:click="submit">添加號碼</button>
        <ul>
            <span id="show" v-for="show in shows" v-if="displayMe" v-once>
                {{show}},
            </span>
        </ul>
        
    </div>-->
    <!--<div>
    <div class="field">
        <div class="block">
            萬位:
        </div>
        <ul>
            <li>0</li>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
            <li>7</li>
            <li>8</li>
            <li>9</li>
        </ul>
    </div>
    <div class="field">
        <div class="block">
            千位:
        </div>
        <ul>
            <li>0</li>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
            <li>7</li>
            <li>8</li>
            <li>9</li>
        </ul>
    </div>

    <button id="submit">添加號碼</button>
    <div id="show">
        當前已選:<span id="total"></span>注<span>您所選的號碼:</span>
    </div>
</div>-->

    <div id="app"></div>
    <div id="btnArea"></div>
    <div id="status"></div>
    <div id="show"></div>
</body>

</html>
<script>
    var selectNumber = function (areaTag, num, btnAreaTag) {
        this.areaTag = areaTag;
        this.num = num;
        this.btnAreaTag = btnAreaTag;
    }
    selectNumber.prototype.createNumbers = function () {
        var areaTag = this.areaTag;
        var num = this.num;
        var bits = ["萬", "千", "百", "十", "個"];
        var money = 4.00000;
        var btnAreaTag = this.btnAreaTag;

        for (var i = 0; i < num; i++) {
            $(areaTag).append(
                `<div class="field">
                    <div class="block">
                        ${bits[i]}位:
                    </div>
                    <ul>
                        <li class="bits--${i}" data-bits="${i}">0</li>
                        <li class="bits--${i}" data-bits="${i}">1</li>
                        <li class="bits--${i}" data-bits="${i}">2</li>
                        <li class="bits--${i}" data-bits="${i}">3</li>
                        <li class="bits--${i}" data-bits="${i}">4</li>
                        <li class="bits--${i}" data-bits="${i}">5</li>
                        <li class="bits--${i}" data-bits="${i}">6</li>
                        <li class="bits--${i}" data-bits="${i}">7</li>
                        <li class="bits--${i}" data-bits="${i}">8</li>
                        <li class="bits--${i}" data-bits="${i}">9</li>
                    </ul>
                    <ul>
                        <li class="control--all--${i}" data-control="all" data-bits="${i}">全</li>
                        <li class="control--large--${i}" data-control="large" data-bits="${i}">大</li>
                        <li class="control--small--${i}" data-control="small" data-bits="${i}">小</li>
                        <li class="control--odd--${i}" data-control="odd" data-bits="${i}">單</li>
                        <li class="control--even--${i}" data-control="even" data-bits="${i}">雙</li>
                        <li class="control--clean--${i}" data-control="clean" data-bits="${i}">清</li>
                    </ul>
                </div>`
            )


        }
        
        /*======================
                btn
        =======================*/

        $(btnAreaTag).append(
            `
        <button id="submit" class="colorBtn">
            添加號碼
        </button>
        <button id="random" class="colorBtn">
            隨機選號
        </button>
        `
        )        
        var bettingTotal = 1;
        var list = [];
        var numList = [];
        
        cleanList();
        function cleanList() {
            // list = [];
            // numList = [];
            $("#status").html(
                `目前投注0注`
            )
            // for (let i = 0; i < num; i++) {
            //     list.push("");
            //     numList.push(0);
            // }
            //根據所要產生的行數決定第二層陣列要幾個
            for (var i = 0; i < num; i++) {
                numList[i] = [];
            }
        }
        $("li[class^=bits--]").on('click', function () {
            // var nowBits = $(this).data("bits");
            //抓取目前是第幾行
            var nowBits = $(this).data("bits");            
            if ($(this).hasClass('current')) {
                // numList[nowBits] -= 1;
                $(this).removeClass('current');
                //看該行是否有與按到的值相等，若有則回傳該值得index，若無則回傳-1
                var index = numList[nowBits].indexOf(parseInt($(this).text()));
                if(index>-1){
                    numList[nowBits].splice(index,1);
                }
                // console.log('numList', numList);
                // showBetting();
            } else {
                // console.log($(this).data("bits"), 'bits');
                // numList[nowBits] += 1;
                $(this).addClass('current');
                numList[nowBits].push(parseInt($(this).text()));
                console.log('numList', numList);

                // showBetting();
            }
 
            
            // console.log('numList', numList);
            showBetting();

                
                     
            
        })
        //預設還不夠一注
        var notAll = true;
        function showBetting() {
            //計算所有注數
            // bettingTotal = 1;
            // for (let i = 0; i < numList.length; i++) {
            //     bettingTotal = bettingTotal * numList[i];
            // }
            // console.log(bettingTotal);

            //計算陣列裡面的物件是否每一行的長度為0
            notAll = numList.some(function (value, index, array) {
                // console.log(value, index, array);
                //陣列裡面物件的長度是否為0
                return value.length == 0 ? true : false;
            });
            //所有注數預設為一
            bettingTotal =1 ;
            for(var i=0;i<numList.length;i++){
                //將陣列裡每個物件的長度相乘
                bettingTotal = bettingTotal * parseInt(numList[i].length);
                // console.log(bettingTotal);
            }
            //如果裡面有值，則將注數跟金額印出來
            if (!notAll) {
                var newMoney = new Number(money * bettingTotal);
                $("#status").html(
                    //toFixed到幾位數
                    `目前投注${bettingTotal}注,投注金額：${newMoney.toFixed(5)}元`
                )
            //沒值，就印0注
            } else {
                $("#status").html(
                    `目前投注0注`
                )
            }

        }



        $("#submit").on('click', function () {
            
            if(notAll){
                alert('不夠一注');
            }else{
                //宣告一個最後呈現的陣列
                var totalList = [];
                for (var i = 0; i < numList.length; i++) {
                    //把原本陣列裡的值放入要呈現的陣列中，並用空白分開
                    totalList.push(numList[i].join(" "));
                }                            
                $("#show").append(
                    `
                <div>
                    <span>[複式組合]</span>
                    ${totalList}
                    <span>共：${bettingTotal}注</span>
                </div>
                `
                );
                $("li[class*=current]").removeClass("current");
                cleanList();   
            }

            // if (numList.indexOf(0) == -1) {
            //     $.each($("li[class*=current]"), function (obj) {
            //         for (var i = 0; i < num; i++) {

            //             if ($(this).hasClass('bits--' + i)) {

            //                 numList[i] += 1;
            //                 list[i] += " " + $(this).text();
            //                 console.log($(this).text());
            //                 console.log(numList, 'numlist');

            //             }
            //         }
            //         $(this).removeClass("current");

            //     })
            //     var totalStr = list.join(", ");
            //     var leng = 15;
            //     console.log(totalStr.length,'length');
            //     if(totalStr.length>5){
            //         console.log('large');
            //         totalStr = totalStr.substr(0,leng)+" ...";
            //     }
            //     $("#show").append(
            //         `
            //         <div>
            //             <span>[複式組合]</span>
            //             ${totalStr}
            //             <span>共：${total}注</span>
            //         </div>
            //         `
            //     );

            //     cleanList();
            // } else {
            //     alert('不夠一注')
            // }


        })
        /*======================
               random按鈕　　
        =======================*/
        $("#random").on('click', function () {
            console.log('click');
             //當numList滿的時候跳出

               var isAll = numList.some(function (value, index, array) {
                        console.log(value, index, array,'some');
                        //陣列裡面物件的長度是否為0
                        return value.length == 10 ? true : false;
                    });
                console.log(isAll,'isAll');
                    for (var i = 0; i < num; i++) {
                        // if(isAll){
                        //     return;
                        // }else{
                        if(numList[i].length != 10){
                            do {
                                var ran = Math.floor(10 * Math.random());
                                // console.log(numList[i].indexOf(ran));
                                // console.log('do');
                                var exsit = false;
                                //如果找不到值
                                console.log(ran);
                                //找不到
                                if (numList[i].indexOf(ran) == -1) {
                                    //在與隨機號碼一樣的數字加上class
                                    $(".bits--" + i).eq(ran).addClass("current");
                                    // console.log($(".bits--" + i).eq(ran));
                                    //並把數字放入陣列中
                                    numList[i].push(ran);
                                    // console.log(numList);
                                } else {
                                    //如果找到值則exsit變成true，loop會繼續執行，直到找不到值為止
                                    exsit = true;
                                }
                                //當exsit 等於true就會繼續執行
                            } while (exsit);  
                        }    
 
                        // }
                 
                    }
            showBetting();
               
            
                    
                    //如果找不到值
                    // if (list.indexOf(ran) == -1) {
                    //     //在與隨機號碼一樣的數字加上class
                    //     $(".sixLottery").children("li").eq(ran).addClass("choice");
                    //     //並把數字放入陣列中
                    //     list.push(ran);
                    // } else {
                    //     //如果找到值則exsit變成true，loop會繼續執行，直到找不到值為止
                    //     exsit = true;
                    // }
                // } while (exsit);
            // }
            // appendNumber();
            // for(var i= 0;i49;i++){
            //     do {
            //         var exist = false;
            //         if (numList.indexOf(ran) !=-1) exist = true;
            //      } while (exist);
            // }

            // console.log(ran);

        })
        
        function pushNumber(nowBits,min, max) {
            //先清空該行
            numList[nowBits] = [];
            for (var i = min; i <= max; i++) {
                numList[nowBits].push(i);
            }
            console.log(numList);
        }    

        /*======================
            　　control
        =======================*/
        $("li[class^='control--']").on('click', function () {
            // console.log($(this).data("control"));

            var nowBits = $(this).data("bits");
            switch ($(this).data("control")) {
                case "all":
                    $(".bits--" + nowBits).addClass("current")
                    pushNumber(nowBits,0,9);
                    showBetting();
                    break;
                case "large":
                    $(".bits--" + nowBits + ":gt(4)").addClass("current");
                    $(".bits--" + nowBits + ":lt(5)").removeClass("current");
                    pushNumber(nowBits,5,9);
                    showBetting();
                    break;
                case "small":
                    $(".bits--" + nowBits + ":gt(4)").removeClass("current");
                    $(".bits--" + nowBits + ":lt(5)").addClass("current");
                    pushNumber(nowBits,0,4);
                    showBetting();
                    break;
                case "odd":
                    $(".bits--" + nowBits + ":even").removeClass("current");
                    $(".bits--" + nowBits + ":odd").addClass("current");
                    numList[nowBits] = [];
                    for (var i = 0; i < 10; i++) {
                            if (i % 2 != 0) {
                                numList[nowBits].push(i);
                            }
                        }
                    showBetting();
                    console.log(numList);
                    break;
                case "even":
                    $(".bits--" + nowBits + ":odd").removeClass("current");
                    $(".bits--" + nowBits + ":even").addClass("current");
                    numList[nowBits] = [];
                    for (var i = 0; i < 10; i++) {
                            if (i % 2 == 0) {
                                numList[nowBits].push(i);
                            }
                        }
                    showBetting();                        
                    console.log(numList);
                    break;
                case "clean":
                    $(".bits--" + nowBits).removeClass("current");
                    numList[nowBits] = [];
                    showBetting();
                    break;
                default:
                    break;
            }

        })
    }//structor end

    var lottery = new selectNumber("#app", 5, "#btnArea");
    lottery.createNumbers();
    // lottery.createSubmit();
    // function add(list) {
    //     var tol=0;
    //     $.each(list,function(obj){
    //         tol +=obj * tol;
    //     })

    // }
    // $("li").on('click',function(){
    //     if($(this).hasClass('current')){
    //         $(this).removeClass('current');
    //     }else{
    //         $(this).attr('class', 'current');
    //     }
    // })
    // $("#submit").on('click',function(){
    //     var list = [];
    //     $.each($("li"),function(obj){

    //         if($(this).hasClass('current')){
    //             list.push($(this).text());
    //             console.log($(this).text());
    //         }

    //     })
    // $("#show").append(list.join(", "));

    // $("#total").append("2");


    //     // if ($("li").hasClass('current')) {
    //     //     console.log('li', $("li").hasClass('current'));
    //     //     // list.push()
    //     // }
    // })

    // var app = new Vue({
    //     el:"#app",
    //     data:{
    //       number:[0,1,2,3,4,5,6,7,8,9],
    //       shows:[],
    //     //   active:true,
    //       isActive:false,
    //       displayMe:false
    //     },
    //     methods:{
    //         handleClick:function(e){
    //             if(e.target.className != "current"){
    //                 e.target.className = "current";
    //             }else{
    //                 e.target.className = "";
    //             }
    //             this.shows.push(parseInt(e.target.innerText));
    //         },
    //         submit:function(){
    //             console.log(this.shows);
    //             this.displayMe=true;
    //             // this.shows=[];

    //         }
    //     }
    // })
</script>